<div class="appointments-container">
  <div class="header">
    <h1>My Appointments</h1>
    <a routerLink="/patient/book-appointment" class="btn btn-primary">Book New Appointment</a>
  </div>

  <div class="alert alert-error" *ngIf="errorMessage">{{ errorMessage }}</div>
  
  <div *ngIf="loading" class="loading-message">Loading appointments...</div>

  <div *ngIf="!loading && appointments.length === 0 && !errorMessage" class="no-appointments">
    <p>You don't have any appointments yet.</p>
    <a routerLink="/patient/book-appointment" class="btn btn-primary">Book Your First Appointment</a>
  </div>

  <div class="appointments-list" *ngIf="!loading && appointments.length > 0">
    <div class="appointment-card" *ngFor="let appointment of appointments">
      <div class="appointment-header">
        <div class="appointment-info">
          <h3>{{ appointment.doctor }}</h3>
          <p class="department">{{ appointment.department }}</p>
        </div>
        <span class="status" [ngClass]="'status-' + (appointment.status || 'Unknown').toLowerCase()">
          {{ appointment.status || 'Unknown' }}
        </span>
      </div>
      
      <div class="appointment-details">
        <div class="detail-item">
          <span class="icon">ğŸ“…</span>
          <span>{{ appointment.date }}</span>
        </div>
        <div class="detail-item">
          <span class="icon">â°</span>
          <span>{{ appointment.time }}</span>
        </div>
      </div>

      <div class="appointment-actions" *ngIf="appointment.status && appointment.status !== 'Completed' && appointment.status !== 'Cancelled'">
        <button class="btn btn-danger" (click)="cancelAppointment(appointment.id)">Cancel</button>
      </div>
    </div>
  </div>
</div>
